Relatório do Sistema - trabalhophytonpuc
Data de geração: 2025-12-26 (atualizado: testes executados em 2025-12-26)
Versão online e completa: https://docs.google.com/document/d/1JRNSn1J0-l1J2J1OAIaKhxuA7DBQf3zP1mxGJ27eLxQ/edit?usp=sharing

1. Arquitetura
- Linguagem: Python 3.9+
- Estrutura principal:
  - `main.py`: ponto de entrada. Recebe dois argumentos: <origem> <destino> e chama `backup.realizar_backup`.
  - `backup.py`: lógica de cópia/versão de backups.
  - `logger.py`: configuração de logs (console e arquivo `logs/backup.log`).
  - `tests/`: testes unitários com pytest.
- Docker: existe um `Dockerfile` que define WORKDIR /app e usa ENTRYPOINT ["python","main.py"], e instala o pytest dentro da imagem.

2. Como executar o projeto
2.1 Local (Windows PowerShell):
  - Instalar dependências:
    python -m pip install -U -r requirements.txt 
  - Executar:
    python .\main.py C:\teste\a C:\teste\b

2.2 Docker (build + run):
  - Construir imagem:
    docker build -t trabalhophytonpuc:latest .

  - Executar (montando origem em leitura e destino para saída):
    docker run --rm -v "C:\teste\a:/app/origem:ro" -v "C:\teste\b:/app/destino" trabalhophytonpuc:latest /app/origem /app/destino

3. Resultados dos testes (pytest)
- Resultado atual (executado no ambiente de desenvolvimento): Todos os testes passaram.

Saída do pytest (execução completa):
.....
5 passed in 0.05s

Como executar os testes (opções):
- Local (caso precise instalar pytest):
  python -m pip install -U pytest
  python -m pytest tests -q

- Via Docker (não precisa instalar pytest localmente):
  docker run --rm -v "C:\Users\Emanuel\Documents\Projetos\Trabalhophytonpuc":/app -w /app python:3.9-slim sh -c "pip install -q pytest && pytest tests -q"

Observações:
- `tests/test_logger.py` agora contém testes que verificam: criação da pasta `logs`, escrita em `logs/backup.log`, não-duplicação de handlers e que o `FileHandler` grava em `backup.log`.
- `tests/test_backup.py` contém testes para diretório inexistente e backup bem-sucedido.
- Corrigi `configurar_logger()` para reconfigurar handlers de forma determinística (remove handlers antigos, adiciona `FileHandler` e `StreamHandler`), o que resolveu falhas anteriores nos testes.
- Total: 5 testes passaram (5 passed).

4. Conclusão
- O projeto está organizado e containerizável via Docker. Para obter resultados completos dos testes no relatório é necessário instalar o `pytest` localmente ou executar os testes dentro de um container que instale o `pytest`.
